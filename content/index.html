[!- extends "_wrappers/main.html" -!]

[!- block main -!]
<hgroup>
  <h1>Background Texture Maker</h1>
  <div class="page-subtitle faded-accent-color">
    give your site a little grit
  </div>
</hgroup>

<bitty-7-0 data-connect="/bits/maker.js Maker" class="default-flow">
  <p>Move the sliders below to set your background. Copy/paste the CSS when you've got it the way you want.</p>

  <div class="texture-example"></div>

  <div class="controls">
    <div>
      <label>
        <div>Lightness</div>
        <input type="range" data-init="initLightness" data-send="lightness" min="0" max="1" step="0.001" />
      </label>
      <label><div>Chroma</div>
        <input type="range" data-init="initChroma" data-send="chroma" min="0" max="0.3" step="0.0001" />
      </label>
    </div>
    <div>
      <label>
        <div>Hue</div>
        <input type="range" data-init="initHue" data-send="hue" min="0" max="360" step="0.001" />
      </label>
      <label>
        <div>Opacity</div>
        <input type="range" data-init="initOpacity" data-send="opacity" min="0" max="1" step="0.01" />
      </label>
    </div>
  </div>

  <details><summary>Texture SVG Source</summary>
    <textarea data-init="initSVG" data-send="updateSVG"></textarea>
  </details>

  <div class="output xlarge-top-margin">
    <pre class="code-block no-numbers"><code data-receive="update"></code></pre>
  </div>
</bitty-7-0>

<h2>Details</h2>
[! filter markdown|safe !]
- This tool generates CSS for a textured site background. 
- The Lightness, Chroma, and Hue sliders set the base background variables for an oklch
color.
- The Opacity slider controls the opacity of the texture SVG relative to the base color. 
- The texture in the SVG is generated via SVG filters. 
- The initial SVG filter values are hard coded. You can open the `Texture SVG Source` 
below the sliders to adjust it manually. 
- The `Copy` button below the CSS copies the code to your 
clipboard for pasting into your stylesheets. 
- Note that the `background-size` in the CSS is required to keep the browser from 
resizing the SVG tiles in a way that changes based on the content of the page. If
you change the source SVG you'll want to manually adjust those values after
you copy/paste the code. 
- The page doesn't store your settings. You can refresh the page to reset 
the SVG if you mess with it and it breaks. 
- The original version of this used base64 encoding. 
[Tyler Sticka](https://tylersticka.com/) reminded me that that's not necessary for SVG. 
I yoinked some code from [this repo](https://github.com/tigt/mini-svg-data-uri/blob/master/index.js)  
by [Taylor Hunt](https://ti.gt/) to do the necessary escaping. 
(See [Optimizing SVGs in data URIs](https://codepen.io/tigt/post/optimizing-svgs-in-data-uris) for details.)
[! endfilter !]
[!- endblock -!]
